# generated by datamodel-codegen:
#   filename:  promptTemplate.json
#   timestamp: 2026-02-01T09:44:00+00:00

from __future__ import annotations

from enum import Enum
from typing import Dict, List, Optional

from pydantic import BaseModel, ConfigDict, Field
from typing_extensions import Annotated

from . import ability, aiApplication


class TemplateType(Enum):
    ChatCompletion = 'ChatCompletion'
    TextGeneration = 'TextGeneration'
    CodeGeneration = 'CodeGeneration'
    Embedding = 'Embedding'
    Classification = 'Classification'
    Extraction = 'Extraction'
    Custom = 'Custom'


class DataType(Enum):
    String = 'String'
    Number = 'Number'
    Boolean = 'Boolean'
    Array = 'Array'
    Object = 'Object'


class TemplateVariable(BaseModel):
    model_config = ConfigDict(
        extra='forbid',
    )
    name: Annotated[
        str, Field(description="Variable name (e.g., 'user_query', 'context')")
    ]
    description: Annotated[
        Optional[str],
        Field(None, description='Description of what this variable represents'),
    ]
    dataType: Annotated[
        Optional[DataType],
        Field(None, description='Expected data type for this variable'),
    ]
    required: Annotated[
        Optional[bool], Field(False, description='Whether this variable is required')
    ]
    defaultValue: Annotated[
        Optional[str], Field(None, description='Default value if not provided')
    ]
    validationPattern: Annotated[
        Optional[str], Field(None, description='Regex pattern for validation')
    ]


class PromptExample(BaseModel):
    model_config = ConfigDict(
        extra='forbid',
    )
    name: Annotated[Optional[str], Field(None, description='Example name')]
    description: Annotated[
        Optional[str], Field(None, description='Description of this example')
    ]
    variables: Annotated[
        Optional[Dict[str, str]], Field(None, description='Example variable values')
    ]
    expectedOutput: Annotated[
        Optional[str], Field(None, description='Expected output for this example')
    ]


class PromptMetrics(BaseModel):
    model_config = ConfigDict(
        extra='forbid',
    )
    usageCount: Annotated[
        Optional[int],
        Field(None, description='Number of times this template has been used'),
    ]
    averageTokens: Annotated[
        Optional[float],
        Field(None, description='Average tokens used when rendering this template'),
    ]
    averageLatencyMs: Annotated[
        Optional[float], Field(None, description='Average latency in milliseconds')
    ]
    successRate: Annotated[
        Optional[float],
        Field(None, description='Success rate (0-1) of executions using this template'),
    ]
    lastUsedAt: Optional[ability.Timestamp] = None


class PromptTemplate(BaseModel):
    model_config = ConfigDict(
        extra='forbid',
    )
    id: Annotated[
        ability.Uuid, Field(description='Unique identifier of the Prompt Template')
    ]
    name: Annotated[
        ability.EntityName,
        Field(description='Name that identifies this Prompt Template'),
    ]
    fullyQualifiedName: Annotated[
        Optional[ability.FullyQualifiedEntityName],
        Field(None, description='Fully qualified name of the Prompt Template'),
    ]
    displayName: Annotated[
        Optional[str], Field(None, description='Display name for the Prompt Template')
    ]
    description: Annotated[
        Optional[ability.Markdown],
        Field(None, description='Description of the Prompt Template and its purpose'),
    ]
    templateContent: Annotated[
        str,
        Field(
            description='The actual prompt template content with variables in {{variable}} format'
        ),
    ]
    systemPrompt: Annotated[
        Optional[str],
        Field(None, description="System prompt to set the AI's behavior and context"),
    ]
    variables: Annotated[
        Optional[List[TemplateVariable]],
        Field(None, description='Variables used in this template'),
    ]
    examples: Annotated[
        Optional[List[PromptExample]],
        Field(None, description='Examples demonstrating how to use this template'),
    ]
    templateType: Annotated[
        Optional[TemplateType], Field(None, description='Type of prompt template')
    ]
    templateVersion: Annotated[
        Optional[str], Field(None, description='Template version for tracking changes')
    ]
    parentTemplate: Annotated[
        Optional[ability.EntityReference],
        Field(
            None, description='Reference to parent template if this is a version/fork'
        ),
    ]
    usedByAgents: Annotated[
        Optional[ability.EntityReferenceList],
        Field(None, description='AI Agents using this template'),
    ]
    metrics: Optional[PromptMetrics] = None
    tags: Annotated[
        Optional[List[ability.TagLabel]],
        Field(None, description='Tags for this Prompt Template'),
    ]
    version: Annotated[
        Optional[ability.EntityVersion],
        Field(None, description='Metadata version of the entity'),
    ]
    owners: Annotated[
        Optional[ability.EntityReferenceList],
        Field(None, description='Owners of this Prompt Template'),
    ]
    followers: Annotated[
        Optional[ability.EntityReferenceList],
        Field(None, description='Followers of this Prompt Template'),
    ]
    domain: Annotated[
        Optional[ability.EntityReference],
        Field(None, description='Domain the Prompt Template belongs to'),
    ]
    updatedAt: Annotated[
        Optional[ability.Timestamp],
        Field(None, description='Last update time in Unix epoch milliseconds'),
    ]
    updatedBy: Annotated[
        Optional[str], Field(None, description='User who made the update')
    ]
    href: Annotated[
        Optional[ability.Href], Field(None, description='Link to this resource')
    ]
    changeDescription: Annotated[
        Optional[ability.ChangeDescription],
        Field(None, description='Change that led to this version'),
    ]
    incrementalChangeDescription: Annotated[
        Optional[ability.ChangeDescription],
        Field(None, description='Change that led to this version'),
    ]
    deleted: Annotated[
        Optional[bool],
        Field(
            False, description='When true, indicates the entity has been soft deleted'
        ),
    ]
    extension: Annotated[
        Optional[ability.EntityExtension],
        Field(None, description='Entity extension data with custom attributes'),
    ]
    domains: Annotated[
        Optional[ability.EntityReferenceList],
        Field(None, description='Domains the Prompt Template belongs to'),
    ]
    votes: Annotated[
        Optional[aiApplication.Votes], Field(None, description='Votes on the entity')
    ]
    lifeCycle: Annotated[
        Optional[aiApplication.LifeCycle],
        Field(None, description='Life Cycle properties of the entity'),
    ]
    sourceHash: Annotated[
        Optional[str],
        Field(
            None, description='Source hash of the entity', max_length=32, min_length=1
        ),
    ]
